"use strict";(self.webpackChunkweather_app=self.webpackChunkweather_app||[]).push([[569],{569:(e,t,s)=>{s.r(t),s.d(t,{default:()=>M});var i=s(5043),n=s(579);const o=e=>{let{temp:t,feels_like:s,units:i}=e;return(0,n.jsxs)("div",{id:"temp",className:"mainBoxes",children:[(0,n.jsxs)("p",{children:["Temperature: ",t,"\xb0","F"===i?"F":"C"]}),(0,n.jsxs)("p",{children:["Feels like: ",s,"\xb0","F"===i?"F":"C"]})]})},r=e=>{let{type:t}=e;const[s,o]=i.useState("https:"+t.icon);return(0,i.useEffect)((()=>{let e=null;const t=()=>{e&&clearTimeout(e);const t=document.getElementById("icon").width>64?"128x128":"64x64";e=setTimeout((()=>o(s.slice(0,35)+t+s.slice(40))),100)};return window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}}),[]),(0,n.jsxs)("div",{id:"type",className:"mainBoxes",children:[(0,n.jsx)("h3",{children:t.description}),(0,n.jsx)("img",{id:"icon",width:128,height:128,src:s,alt:t.description})]})};var a=s(7154);const l={location:{name:"Kolbacz",region:"",country:"Poland",lat:53.3,lon:14.81,tz_id:"Europe/Warsaw",localtime_epoch:1641590350,localtime:"2022-01-07 22:19"},astronomy:{astro:{sunrise:"08:14 AM",sunset:"04:01 PM",moonrise:"11:10 AM",moonset:"10:08 PM",moon_phase:"Waxing Crescent",moon_illumination:"30"}}},d={location:{name:"Kolbacz",region:"",country:"Poland",lat:53.3,lon:14.81,tz_id:"Europe/Warsaw",localtime_epoch:1641590350,localtime:"2022-01-07 22:19"},current:{last_updated_epoch:1641590100,last_updated:"2022-01-07 22:15",temp_c:1,temp_f:33.8,is_day:0,condition:{text:"Overcast",icon:"//cdn.weatherapi.com/weather/64x64/night/122.png",code:1009},wind_mph:3.8,wind_kph:6.1,wind_degree:190,wind_dir:"S",pressure_mb:1010,pressure_in:29.83,precip_mm:.1,precip_in:0,humidity:100,cloud:100,feelslike_c:-3.2,feelslike_f:26.2,vis_km:10,vis_miles:6,uv:1,gust_mph:13.9,gust_kph:22.3}},c=(0,i.lazy)((()=>s.e(455).then(s.bind(s,455)))),h=e=>Math.floor(Date.parse((new Date).toDateString()+" "+e)/1e3),p=e=>{let{coordinates:t}=e;const s=t[1]+","+t[0],[o,r]=i.useState(null),d={method:"GET",url:"https://weatherapi-com.p.rapidapi.com/astronomy.json",params:{q:s},headers:{"x-rapidapi-host":"weatherapi-com.p.rapidapi.com","x-rapidapi-key":"0bedbfb065msh4d74772935f4250p1f5b5cjsn0208d1ba7eb7"}};if((0,i.useEffect)((()=>{(async e=>{if(e)return l;let t=l;return await a.A.request(d).then((e=>{t=e.data})).catch((e=>{console.log(e)})),t})(!1).then((e=>{r({moon_illumination:parseInt(e.astronomy.astro.moon_illumination),moon_phase:e.astronomy.astro.moon_phase,moonrise:h(e.astronomy.astro.moonrise),moonset:h(e.astronomy.astro.moonset),sunrise:h(e.astronomy.astro.sunrise),sunset:h(e.astronomy.astro.sunset),localtime_epoch:e.location.localtime_epoch,localtime:e.location.localtime})}))}),[s]),null===o)return(0,n.jsx)("div",{children:"Loading..."});const p=Math.floor(Date.parse(o.localtime)/1e3)-o.localtime_epoch;return(0,n.jsx)(c,{sunrise:o.sunrise,sunset:o.sunset,localtime_epoch:Math.floor(Date.parse(o.localtime)/1e3),timeDifference:p,moonPhase:o.moon_phase,moonIllumination:o.moon_illumination})};var m=s(12),u=s(5843);const x=()=>(0,n.jsxs)("svg",{width:"53",height:"53",viewBox:"0 0 53 53",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,n.jsx)("path",{d:"M13.76 16.518L36.663 39.421L39.491 36.593L16.126 13.397L14.326 14.256L13.76 16.518Z",fill:"#715C3A"}),(0,n.jsx)("path",{d:"M35.637 37.566L36.737 46.366L53 52.73L46.636 36.466L37.836 35.366L35.637 37.566Z",fill:"#8F8F8F"}),(0,n.jsx)("path",{d:"M6 16.27V18.27H8V20.306L18 20.27V18.27L20 17.27V9.27H18V7.27H16V4.27H14V2.27H12V0.269997H8V8.27H0V12.27H2V14.27H4V16.27H6Z",fill:"#7D7D7D"})]}),_={type:"spring",stiffness:500,damping:40,mass:20},w=e=>{let{deg:t}=e;const{ref:s,inView:o}=(0,u.Wx)({threshold:.8}),[r,a]=(0,i.useState)(!1);return(0,i.useEffect)((()=>{o&&!r&&setTimeout((()=>{o&&!r&&a(!0)}),1e3)}),[o,r]),(0,n.jsxs)("div",{id:"compass",children:[(0,n.jsxs)("svg",{width:"150",height:"150",viewBox:"0 0 508 508",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,n.jsx)("path",{d:"M254 508C394.28 508 508 394.28 508 254C508 113.72 394.28 0 254 0C113.72 0 0 113.72 0 254C0 394.28 113.72 508 254 508Z",fill:"#324A5E"}),(0,n.jsx)("path",{d:"M254 447.2C360.701 447.2 447.2 360.701 447.2 254C447.2 147.299 360.701 60.8 254 60.8C147.299 60.8 60.8 147.299 60.8 254C60.8 360.701 147.299 447.2 254 447.2Z",fill:"#84DBFF"}),(0,n.jsx)("path",{d:"M254 420.4C345.9 420.4 420.4 345.9 420.4 254C420.4 162.1 345.9 87.6 254 87.6C162.1 87.6 87.6 162.1 87.6 254C87.6 345.9 162.1 420.4 254 420.4Z",fill:"white"}),(0,n.jsx)("path",{d:"M250.8 134.4C258.09 134.4 264 128.49 264 121.2C264 113.91 258.09 108 250.8 108C243.51 108 237.6 113.91 237.6 121.2C237.6 128.49 243.51 134.4 250.8 134.4Z",fill:"#2C9984"}),(0,n.jsx)("path",{d:"M250.8 395.2C258.09 395.2 264 389.29 264 382C264 374.71 258.09 368.8 250.8 368.8C243.51 368.8 237.6 374.71 237.6 382C237.6 389.29 243.51 395.2 250.8 395.2Z",fill:"#2C9984"}),(0,n.jsx)("path",{d:"M381.6 264.8C388.89 264.8 394.8 258.89 394.8 251.6C394.8 244.31 388.89 238.4 381.6 238.4C374.31 238.4 368.4 244.31 368.4 251.6C368.4 258.89 374.31 264.8 381.6 264.8Z",fill:"#2C9984"}),(0,n.jsx)("path",{d:"M120.4 264.8C127.69 264.8 133.6 258.89 133.6 251.6C133.6 244.31 127.69 238.4 120.4 238.4C113.11 238.4 107.2 244.31 107.2 251.6C107.2 258.89 113.11 264.8 120.4 264.8Z",fill:"#2C9984"})]}),(0,n.jsx)(m.P.div,{ref:s,id:"arrow",transition:_,initial:"hidden",animate:o&&!r?"visible":"",variants:{visible:{rotate:t},hidden:{rotate:t-90}},children:(0,n.jsx)(x,{})})]})},f=e=>{let{speed:t,speed_mph:s,gust:i,gust_mph:o,deg:r,units:a}=e;return(0,n.jsx)("div",{id:"wind",className:"mainBoxes",children:(0,n.jsxs)("div",{className:"wrapper",children:[(0,n.jsxs)("div",{id:"values",children:[(0,n.jsx)("h3",{children:"Wind"}),(0,n.jsxs)("p",{children:["Speed: ","F"===a?s+" mph":t+" km/h"]}),(0,n.jsxs)("p",{children:["Gust: ","F"===a?o+" mph":i+" km/h"]}),(0,n.jsxs)("p",{children:[r,"\xb0"]})]}),(0,n.jsx)(w,{deg:r-135})]})})},j=e=>{let{humidity:t,pressure:s,clouds:i}=e;return(0,n.jsxs)("div",{id:"details",className:"mainBoxes",children:[(0,n.jsx)("h3",{children:"Details"}),(0,n.jsxs)("p",{children:["Humidity: ",t,"%"]}),(0,n.jsxs)("p",{children:["Pressure: ",s," hPa"]}),(0,n.jsxs)("p",{children:["Clouds: ",i,"%"]})]})};var g=s(6938);const v={visible:{opacity:1},hidden:{opacity:0}},y={hidden:{y:"-100vh",opacity:0},visible:{y:"200px",opacity:1,transition:{delay:.5}}},C=e=>{let{showModal:t,setShowModal:s,buttonText:i,promptText:o,buttonAction:r}=e;return(0,n.jsx)(g.N,{children:t&&(0,n.jsx)(m.P.div,{className:"backdrop",variants:v,initial:"hidden",animate:"visible",exit:"hidden",onClick:()=>s(!1),children:(0,n.jsxs)(m.P.div,{className:"modal",variants:y,children:[(0,n.jsx)("p",{children:o}),(0,n.jsx)("button",{onClick:()=>s(!1),children:i})]})})})};class b{}b.getWeather=async(e,t)=>{const s={method:"GET",url:"https://weatherapi-com.p.rapidapi.com/current.json",params:{q:e[1]+","+e[0]},headers:{"x-rapidapi-host":"weatherapi-com.p.rapidapi.com","x-rapidapi-key":"0bedbfb065msh4d74772935f4250p1f5b5cjsn0208d1ba7eb7"}};try{const e=t?d:(await a.A.request(s)).data,i={temp:e.current.temp_c,temp_f:e.current.temp_f,feels_like:e.current.feelslike_c,feels_like_f:e.current.feelslike_f,pressure:e.current.pressure_mb,humidity:e.current.humidity,clouds:e.current.cloud,weather:{description:e.current.condition.text,icon:e.current.condition.icon},wind:{speed:e.current.wind_kph,speed_mph:e.current.wind_mph,deg:e.current.wind_degree,gust:e.current.gust_kph,gust_mph:e.current.gust_mph}};return{weather:i,location:{name:e.location.name,country:e.location.country,lat:e.location.lat,lon:e.location.lon}}}catch(i){return i.response?i.response.data.error.message:"Something went wrong"}};const k=b,M=e=>{let{coordinates:t,units:s,setLoading:a}=e;const[l,d]=i.useState(null),[c,h]=i.useState(null),[m,u]=(0,i.useState)(!1),[x,_]=(0,i.useState)("");(0,i.useEffect)((()=>{a(!0),k.getWeather(t,!1).then((e=>{if("string"===typeof e)_(e),u(!0);else{d(e.weather),h(e.location);const t=document.getElementById("weather");t&&setTimeout((()=>t.scrollIntoView({behavior:"smooth"})),100)}a(!1)}))}),[t,a]);return(0,n.jsx)("div",{children:l&&c&&t?(0,n.jsxs)("div",{id:"weather",children:[(0,n.jsx)(C,{showModal:m,setShowModal:u,buttonText:"Ok",promptText:x}),(0,n.jsxs)("div",{className:"mainBoxes",children:[(0,n.jsxs)("h1",{children:["Location: ",c.name]}),(0,n.jsxs)("h2",{children:["Country: ",c.country]})]}),(0,n.jsx)(o,{temp:"F"===s?l.temp_f:l.temp,feels_like:"F"===s?l.feels_like_f:l.feels_like,units:s}),(0,n.jsx)(f,{speed:l.wind.speed,speed_mph:l.wind.speed_mph,deg:l.wind.deg,gust:l.wind.gust,gust_mph:l.wind.gust_mph,units:s}),(0,n.jsx)(r,{type:l.weather}),(0,n.jsx)(j,{humidity:l.humidity,pressure:l.pressure,clouds:l.clouds}),(0,n.jsx)(p,{coordinates:t})]}):(0,n.jsx)("p",{children:"Loading..."})})}}}]);
//# sourceMappingURL=569.1664ae06.chunk.js.map